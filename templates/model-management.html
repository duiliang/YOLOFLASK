{% extends 'base.html' %}

{% block title %}YOLO目标检测系统 - 模型管理{% endblock %}

{% block page_title %}模型管理{% endblock %}

{% block content %}
<div class="row mb-3">
    <div class="col-12">
        <a href="{{ url_for('main.index') }}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> 返回检测页面
        </a>
    </div>
</div>

<div class="row">
    <div class="col-12 mb-4">
        <div class="card">
            <div class="card-header">
                <h5>模型列表</h5>
            </div>
            <div class="card-body">
                <!-- 模型列表 -->
                <div class="table-responsive">
                    <table class="table table-striped table-hover" id="modelTable">
                        <thead>
                            <tr>
                                <th>模型名称</th>
                                <th>模型类型</th>
                                <th>描述</th>
                                <th>类别信息</th>
                                <th>状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="modelTableBody">
                            <!-- 模型列表将通过JS动态加载 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5>添加新模型</h5>
            </div>
            <div class="card-body">
                <form id="addModelForm" class="row g-3">
                    <div class="col-md-6">
                        <label for="modelName" class="form-label">模型名称</label>
                        <input type="text" class="form-control" id="modelName" required>
                    </div>
                    <div class="col-md-6">
                        <label for="modelType" class="form-label">模型类型 <small class="text-muted">(必填)</small></label>
                        <select class="form-select" id="modelType">
                            <option value="">自动检测</option>
                            <option value="yolov8">YOLOv8</option>
                            <option value="yolov5">YOLOv5</option>
                        </select>
                    </div>
                    <div class="col-md-12">
                        <label for="modelPath" class="form-label">模型路径</label>
                        <input type="text" class="form-control" id="modelPath" required placeholder="models/model.onnx">
                        <div class="form-text">可以是绝对路径(如 D:\models\yolov8n.onnx)或相对于项目根目录的路径(如 models/yolov8n.onnx)</div>
                    </div>
                    <div class="col-md-12">
                        <label for="modelDescription" class="form-label">描述</label>
                        <textarea class="form-control" id="modelDescription" rows="2"></textarea>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">添加模型</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/utils.js') }}"></script>
<script src="{{ url_for('static', filename='js/model-manager.js') }}"></script>
{% endblock %}
